% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/sov_user.R
\name{sov_user}
\alias{sov_user}
\title{Traditional Shapley-Owen Values with User Inputs}
\usage{
sov_user(
  ideals = NULL,
  av = NULL,
  weight_nom = FALSE,
  absolute = FALSE,
  vw = NULL,
  q = NULL,
  pr = 0.5001,
  nPoints1 = 360,
  nPoints2 = 360,
  dec = 3,
  out_dir = "output",
  print_results = FALSE
)
}
\arguments{
\item{ideals}{Matrix of ideal points (legislators x dimensions)}

\item{av}{Attendance vector coded attend=1, "not attend"=NA.}

\item{weight_nom}{If TRUE use weights estimated from wnom output, if FALSE use vector of 1's. ... For wnom only.}

\item{absolute}{If TRUE, q is a scalar of yeas needed to pass proposal.  If FALSE, pr is the proportion of yeas need to pass a proposal among voters attending.}

\item{vw}{Vector of weights for each voter (default 1 for each member, applied later).}

\item{q}{The quota of yeas need to pass a proposal under absolute k-majority rule (scalar, default absolute.maj(vw) applied later ).}

\item{pr}{The proportion of yea votes needed to pass a proposal among voters attending for simple k-majority rule (scalar, default: 0.5001).}

\item{nPoints1}{the number of points sampled along the azimuth (the first spherical coordinate the azimuth).  Sampled from 0 to 2*pi.}

\item{nPoints2}{the number of points sampled along the inclination (the second and third spherical coordinate).  Sampled from 0 to 2*pi.}

\item{dec}{The number of decimal places reported for vs-sovs.}

\item{out_dir}{The path to the output directory. If print_results = TRUE, the default is a subdirectory of the current path called "output", which the program creates.}

\item{print_results}{If TRUE, print results to an excel file in out_dir; if FALSE, don't print results.  In both cases, results are returned.}
}
\value{
A list with data frames containing ideal points, number of pivots, name of pivots for each direction sampled, and SOVs for each voter.
}
\description{
This function calculates traditional Shapley-Owen values (SOVs) from data provided by the user.
}
\examples{

# Traditional SOVs in 2D
# Note: You supply only ideal points and an attendance vector (i.e., who is
# always present), not roll-call votes.

# Ideals: 5 voters in 2D
i1 <- c( 0.7,  0.7)
i2 <- c(-0.5,  0.5)
i3 <- c(-0.7, -0.7)
i4 <- c( 0.5, -0.5)
i5 <- c( 0.0,  0.0)
ideals <- rbind(i1, i2, i3, i4, i5)
rownames(ideals) <- paste0("i", 1:5)
colnames(ideals) <- c("coord1D","coord2D")

# Attendance: 1 = included, NA = excluded
# Example: exclude i5 from the analysis
av <- c(1, 1, 1, 1, NA)

## --- Equal voting weights ---------------------------------------------------
vw <- rep(1, nrow(ideals))

## --- Traditional SOV (simple majority among the four voters included) ------
out_sov <- sov_user(
  ideals   = ideals,
  av       = av,
  absolute = FALSE,   # simple k-majority among included voters
  pr       = 0.5001,
  vw       = vw,
  nPoints1 = 72,      # 360 degrees divided into 72 equal sized increments
  nPoints2 = 72,
  dec      = 3
)

# aggregate results by member
out_sov$pivot_summary
# Directions examined (normals) and pivot names by direction:
out_sov$pivot_by_angle

# Tip: switch to an absolute quota by setting absolute = TRUE and q = 3
# (for example) to require 3 yeas regardless of who's included in av.
}
